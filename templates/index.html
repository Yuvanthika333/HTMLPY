<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web App</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container">
    <div class="container">
        <div class="row">
            <div class="col"></div><div class="col-8"><h3 class="my-4 text-center">Crud App</h3></div>
        <div class="col pt-4 text-end"><a href="/" class="btn btn-light"><i class="fa-regular fa-circle-user"></i></a></div></div></div>
        
    
    
    <div class="row "  >
        <div class="col-4">
            <div class="card text-center ">
                <H3 class="heading mt-4">Registration</H3>
                <div class="card-body">
                    <form action="/register" method="post">
                    <input class=" form-control my-4" type="text" placeholder="Enter Student Name" name="Name">
                    <input class=" form-control my-4" type="text" placeholder="Enter Student Address" name="Address">
                    <select class="form-select my-4" id="floatingSelect" aria-label="Floating label select example" name="Course">
                    
                        <option value="Python">Python</option>
                        <option value="Web Development">Web Development</option>
                        <option value="Tally">Tally</option>
                      </select>
                      <select class="form-select my-4" id="floatingSelect" aria-label="Floating label select example" name="Courseduration">
                    
                        <option value="1 month">1 month</option>
                        <option value="2 months">2 months</option>
                        <option value="3 months">3 months</option>
                      </select>
                    
                    <button type="submit" class="btn btn-success">Register</button>
                    </form>
                </div>
                {%if final%}
                <div class="container">
                    <div class="alert alert-warning alert-dismissible fade show" role="alert">
                        <strong>Success!</strong>{{final}}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                      </div>
                </div>
                {%endif%}
              </div>
        </div>
        <div class="col-8">
            <table class="table table-hover">
                <tr>
                    <th>Sno</th>
                    <th>Name</th>
                    <th>Address</th>
                    <th>Course</th>
                    <th>Course duration</th>
                    <th>Update</th>
                    <th>Delete</th>
                </tr>
                {%for stud in stud_data%}
                <tr>
                    <td>{{ stud.sno}}</td>
                    <td>{{stud.name}}</td>
                    <td>{{stud.address}}</td>
                    <td>{{stud.course}}</td>
                    <td>{{stud.course_duration}}</td>
                    <td><button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#updateModal{{ stud.sno}}">
                        <i class="fa-regular fa-pen-to-square"></i>
                    </button>

                      </td>
                    
                    <!-- Button trigger modal -->
                    
                    <td><a href="/delete/{{ stud.sno}}" class="btn btn-danger"><i class="fa-solid fa-trash"></i></a></td>
                </tr>
                    <!-- Modal --> 
                    <div class="modal fade" id="updateModal{{ stud.sno}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h1 class="modal-title fs-5" id="exampleModalLabel">Update Record</h1>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form action="/update/{{ stud.sno}}" method="post">
                                    <input class=" form-control my-4" type="text" placeholder="Enter Student Name" name="Name" value="{{stud.name}}">
                                <input class=" form-control my-4" type="text" placeholder="Enter Student Address" name="Address" value="{{stud.address}}">
                                <select class="form-select my-4" id="floatingSelect" aria-label="Floating label select example" name="Course">
                                    <!-- <option value="{{stud.course}}" selected disabled hidden>
                                        {{stud.course}}   
                                    </option> -->
                                    <!-- <option value="none" selected disabled hidden> {{stud.course}}</option>  -->
                                    <option value="Python">Python</option>
                                    <option value="Web Development">Web Development</option>
                                    <option value="Tally">Tally</option>
                                </select>
                                <select class="form-select my-4" id="floatingSelect" aria-label="Floating label select example" name="Courseduration">
                                    <!-- <option value="{{stud.course_duration}}" selected disabled hidden>
                                        {{stud.course_duration}}  
                                    </option> -->
                                    <option value="1 month">1 month</option>
                                    <option value="2 months">2 months</option>
                                    <option value="3 months">3 months</option>
                                </select>
                                
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                              <button type="submit" class="btn btn-primary">Update</button>
                            </form>
                            </div>
                          </div>
                        </div>
                      </div>
                      

                {%endfor%}
              </table>
        </div>
    </div>
</div>  
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://kit.fontawesome.com/86284ac371.js" crossorigin="anonymous"></script>

</body>
</html>